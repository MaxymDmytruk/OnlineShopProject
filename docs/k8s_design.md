# Архітектура розгортання в Kubernetes (E-Shop Core API)

## 1. Огляд сервісу
Додаток **E-Shop Core API** розгортається як контейнеризований сервіс. Оскільки поточна версія використовує файлову базу даних **SQLite**, архітектура розгортання адаптована під стратегію **Stateful Single Replica**.

## 2. Ключові компоненти кластера

### A. Deployment Strategy (Replicas: 1)
* Використовується **Deployment** з **1 реплікою**.
* **Причина:** SQLite не підтримує одночасний запис з кількох інстансів по мережі. Щоб уникнути колізій даних та блокувань ("Database is locked"), ми гарантуємо, що в один момент часу працює лише один екземпляр бекенду.
* *Майбутнє покращення:* Для масштабування (Horizontal Pod Autoscaling) необхідна міграція на PostgreSQL/MySQL.

### B. Persistent Storage (PVC)
* Використовується **PersistentVolumeClaim (PVC)**.
* Цей том монтується в контейнер за шляхом `/app/db`.
* Це гарантує, що файл `database.db` **не зникне** при перезапуску пода або оновленні версії додатка (Persistence).

### C. Ingress & Service
1.  **Ingress:** Приймає HTTPS трафік ззовні (`shop.example.com`) і перенаправляє його всередину кластера.
2.  **Service (ClusterIP):** Забезпечує стабільну внутрішню точку доступу до пода, незалежно від його IP-адреси.

## 3. CI/CD Інтеграція
* При коміті в гілку `main`, **GitHub Actions** збирає Docker-образ.
* Образ завантажується в **GitHub Container Registry (GHCR)**.
* Kubernetes (через механізм ImagePull) завантажує нову версію образу при рестарті пода.