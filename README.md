# E-Shop Core API 

![CI Status](https://github.com/MaxymDmytruk/OnlineShopProject/actions/workflows/ci.yml/badge.svg)


–û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω—É —Ü–∏—Ñ—Ä–æ–≤–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ (E-Shop).


## üìÇ –ó–≤—ñ—Ç –ø–æ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏—Ö

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 1: –ë–∞–∑–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
* **–ó–∞–≤–¥–∞–Ω–Ω—è:** –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π —Å–µ—Ä–≤–µ—Ä, –ë–î —Ç–∞ –∫–ª—ñ—î–Ω—Ç.
* **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑–≤'—è–∑–∫—É Flask + SQLite + HTML.
* **–§–∞–π–ª–∏:**
    * [app.py](./app.py) ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É.
    * [init_db.py](./init_db.py) ‚Äî –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–î.

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 2: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞ Roadmap
* **–ó–∞–≤–¥–∞–Ω–Ω—è:** –û–ø–∏—Å–∞—Ç–∏ –±—ñ–∑–Ω–µ—Å-–≤–∏–º–æ–≥–∏ —Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É.
* **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–≤–æ—Ä–µ–Ω–æ –ø–∞–ø–∫—É `docs/` –∑ –ø–æ–≤–Ω–∏–º –æ–ø–∏—Å–æ–º —Å–∏—Å—Ç–µ–º–∏.
* **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏:**
    * üìÑ [–ë—ñ–∑–Ω–µ—Å-–¥–æ–∫—É–º–µ–Ω—Ç](./docs/business_doc.md) (Roles, Functional/Non-functional requirements).
    * üó∫Ô∏è [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ –¥—ñ–∞–≥—Ä–∞–º–∞](./docs/architecture_diagram.png).
    * üìÖ [Roadmap –ø—Ä–æ—î–∫—Ç—É](./docs/roadmap.md).

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 3: Domain-Driven Design (DDD)
* **–ó–∞–≤–¥–∞–Ω–Ω—è:** –í–∏–¥—ñ–ª–∏—Ç–∏ –±—ñ–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∏ —Ç–∞ —Å—É—Ç–Ω–æ—Å—Ç—ñ.
* **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∏–¥—ñ–ª–µ–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∏ `Users`, `Catalog`, `Orders`.
* **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏:**
    * [–ì–ª–æ—Å–∞—Ä—ñ–π —Ç–∞ –°—É—Ç–Ω–æ—Å—Ç—ñ](./docs/domain/entities.md).
    * [–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞ –º–∞–ø–∞](./docs/domain/context_map.png).
    * üìÇ [–ö–æ–¥ –º–æ–¥–µ–ª–µ–π (domain/models.py)](./domain/models.py).

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 4: REST API, OpenAPI & CRUD
* **–ó–∞–≤–¥–∞–Ω–Ω—è:** –°–ø—Ä–æ—î–∫—Ç—É–≤–∞—Ç–∏ API —Ç–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ CRUD.
* **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏–π —Å—Ç–∏–ª—å:** –ú–æ–¥—É–ª—å–Ω–∏–π –ú–æ–Ω–æ–ª—ñ—Ç ([ADR-0001](./docs/adr/0001-architecture-style.md)).
* **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–≤–Ω–∏–π CRUD –¥–ª—è –¢–æ–≤–∞—Ä—ñ–≤ —Ç–∞ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é.
* **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏:**
    * üìÑ **[–ö–æ–Ω—Ç—Ä–∞–∫—Ç API (openapi.yaml)](./docs/api/openapi.yaml)**.
    * üì∏ [–°–∫—Ä—ñ–Ω—à–æ—Ç Swagger Editor](./docs/api/swagger_screenshot.png).
    * üìÇ –ö–æ–¥: [api/product_routes.py](./api/product_routes.py) —Ç–∞ [service/product_service.py](./service/product_service.py).

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 5: Error Handling & Reliability
* **–ó–∞–≤–¥–∞–Ω–Ω—è:** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å, rate-limiting, —Ä–µ—Ç—Ä–∞—ó.
* **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤–µ—Ä —Ç–∞ –∫–ª—ñ—î–Ω—Ç —Å—Ç—ñ–π–∫—ñ –¥–æ –∑–±–æ—ó–≤.
* **–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:**
    * **Idempotency:** –ó–∞–≥–æ–ª–æ–≤–æ–∫ `Idempotency-Key` –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ –¥—É–±–ª—ñ–≤ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Ç–æ–≤–∞—Ä—É.
    * **Rate Limiting:** –û–±–º–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤ –∑ –æ–¥–Ω–æ–≥–æ IP (–ø–æ–≤–µ—Ä—Ç–∞—î 429).
    * **Smart Client:** JS –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–±–∏—Ç—å —Ä–µ—Ç—Ä–∞—ó –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö –º–µ—Ä–µ–∂—ñ.
    * **Degraded Mode:** –ñ–æ–≤—Ç–∏–π –±–∞–Ω–µ—Ä –Ω–∞ —Å–∞–π—Ç—ñ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∑—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è–º.

### ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 6: Docker & Containerization
* **–ó–∞–≤–¥–∞–Ω–Ω—è:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑—É–≤–∞—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫.
* **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ—î–∫—Ç –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é.
* **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç–∏:**
    * üê≥ [Dockerfile](./Dockerfile) (Multistage build, Python 3.10 slim).
    * üêô [docker-compose.yml](./docker-compose.yml) (–°–µ—Ä–≤—ñ—Å API + Volume –¥–ª—è –ë–î).
    * –§–∞–π–ª [.dockerignore](./.dockerignore) –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.


### üíª –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ

–©–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç –Ω–∞ —Å–≤–æ—î–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ (–í–∏–º–æ–≥–∞ –ü—Ä–∞–∫—Ç–∏—á–Ω–æ—ó 6):

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Docker Compose (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
–¶–µ –ø—ñ–¥–Ω—ñ–º–µ –≤—Å–µ –æ—Ç–æ—á–µ–Ω–Ω—è –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é.

1.  **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env`** —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É:
    ```bash
    SECRET_KEY=dev-secret-key
    ```
2.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å:**
    ```bash
    docker compose up --build
    ```
3.  **–í—ñ–¥–∫—Ä–∏–π—Ç–µ:** http://127.0.0.1:5000

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É (Python)
```bash
# 1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# 2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ –ë–î (—Å—Ç–≤–æ—Ä–∏—Ç—å –∞–¥–º—ñ–Ω–∞)
python init_db.py

# 3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
python app.py
```

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ 7: CI/CD 

–£ —Ü—å–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –ø–æ–≤–Ω–∏–π **CI/CD –ø–∞–π–ø–ª–∞–π–Ω** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é GitHub Actions.

### 1. CI (Continuous Integration)
–ü—Ä–∏ –∫–æ–∂–Ω–æ–º—É `push` —É –≥—ñ–ª–∫—É `main` –∞–±–æ `pull request`:
* ‚úÖ **Setup:** –ù–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è –æ—Ç–æ—á–µ–Ω–Ω—è Python 3.10.
* ‚úÖ **Install:** –í—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `requirements.txt`.
* ‚úÖ **Test:** –ó–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏ —á–µ—Ä–µ–∑ `pytest`.

### 2. CD (Continuous Delivery)
–Ø–∫—â–æ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ (—ñ —Ü–µ `push` —É `main`):
* üì¶ **Build:** –ó–±–∏—Ä–∞—î—Ç—å—Å—è Docker-–æ–±—Ä–∞–∑ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.
* üöÄ **Publish:** –û–±—Ä–∞–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—É–±–ª—ñ–∫—É—î—Ç—å—Å—è –≤ **GHCR** (GitHub Container Registry).

**–ê–¥—Ä–µ—Å–∞ –æ–±—Ä–∞–∑—É:**
`ghcr.io/maxymdmytruk/shop-api:latest`

### ‚≠ê Style Points (–í–∏–∫–æ–Ω–∞–Ω—ñ –±–æ–Ω—É—Å–Ω—ñ –≤–∏–º–æ–≥–∏)
–ú–∏ —Ä–µ–∞–ª—ñ–∑—É–≤–∞–ª–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø–∞–π–ø–ª–∞–π–Ω—É:
1.  üîí **Trivy Security Scan:** –û–±—Ä–∞–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∞–Ω—É—î—Ç—å—Å—è –Ω–∞ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ (CVE) –ø–µ—Ä–µ–¥ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—î—é.
2.  üìù **Job Summary:** –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –≥–∞—Ä–Ω–∏–π Markdown-–∑–≤—ñ—Ç —É –ø—ñ–¥—Å—É–º–∫–∞—Ö (Summary) –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç—ñ–≤ —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ –æ–±—Ä–∞–∑.


---
## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω–∏–π —Å—Ç–µ–∫
* **Backend:** Python, Flask, SQLite.
* **Frontend:** HTML, JS (Fetch API), Bootstrap 5.
* **DevOps:** Docker, GitHub Actions.